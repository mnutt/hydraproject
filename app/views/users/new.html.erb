<% @page_title = 'Signup' %>
<% @user.password = @user.password_confirmation = nil %>

  <h2 class="title">Account Signup</h2>
	
  <%= render :partial => 'shared/notice_text' %>
  
  <% form_for :user, :url => users_path do |f| -%>
    <% if not @invite.nil? %>
      <input type="hidden" name="invite_id" value="<%= @invite.id %>" />
      Please complete the following form to signup.	
      &nbsp;&nbsp;The person who invited you 
      (<i><%= @invite.user.first_name %></i>) 
      will automagically be added to your friends list.
    <% end %>

    <center>
      <div id="signupform" class="form" style="margin-right: 100px;">
	
	<%= error_messages_for :user %><br/>

	<table cellspacing="2" cellpadding="2" width="400px">
	  <tr>
	    <td><label for="user_login">Username:</label></td>
	    <td>
	      <%= f.text_field :login, :size => 14, :maxlength => 20,	:class => 'validate-alphanum nice-field required' %>	 
	    </td>
	  </tr>
	  <tr>
	    <td>
	      <input type="hidden" name="dummy" class="validate-match" />
	      <label for="user_password">Password:</label></td>
	    <td>
	      <%= f.password_field :password, :size => 10, :maxlength => 15, :class => 'nice-field required' %>
	    </td>
	  </tr>
	  <tr>
	    <td><label for="user_password_confirmation">Password (confirm):</label></td>
	    <td>
	      <%= f.password_field :password_confirmation, :size => 10, :maxlength => 15, :class => 'nice-field required' %>
	    </td>
	  </tr>
	  <% if C[:require_email] -%>
	    <tr>
	      <td><label for="user_email">Email:</label></td>
	      <td>
		<%= f.text_field :email, :size => 10, :maxlength => 100, :class => 'nice-field required' %>
	      </td>
	    </tr>
	  <% end -%>
	  <tr>
	    <td colspan="2">
	      <%= check_box_tag :ageverify, 'yes', :class => "validate-is-checked" -%> I am at least 13 years old.
	    </td>
	  </tr>
	  <tr>
	    <td colspan="2" class="submit_button">
	      <%= submit_tag "Create Account", :class => "submit-box" -%>
	    </td>
	  </tr>
	</table>
      </div>
    </center>
  <% end -%>

  <ul><b>Signup Notes</b>
    <li>cookies are required to signup and login</li>
    <li>since we only collect your username and <i>never</i> your email address, there is <i>absolutely no way</i> for you to recover your password if you ever forget it or lose it</li>
    <li>thus if you cannot easily remember your password, it is highly recommended you use software like <a href="http://passwordsafe.sourceforge.net/" target="_blank">Password Safe</a> to store your passwords securely</li>
  </ul>
  
<script type="text/javascript">
  is_checked = function(value, element) {
    return element.checked;
  }
	passwords_must_match = function(value, element) {
		return ($('user_password_confirmation').value == $('user_password').value)
	}

  new Validation('signup-form');
  Validation.add('validate-is-checked', 'You must agree to this in order to signup.', is_checked);
  Validation.add('validate-match', 'Passwords entered do not match.', passwords_must_match);
</script>

